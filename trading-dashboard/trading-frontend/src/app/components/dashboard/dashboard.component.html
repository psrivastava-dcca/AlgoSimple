<div class="dashboard-container">
  <!-- Header -->
  <div class="header">
    <h1>ğŸš€ Trading Dashboard</h1>
    <p>Real-time market opportunities with customizable price range filtering</p>
  </div>

  <!-- Controls -->
  <div class="controls">
    <div class="control-group">
      <label for="maxStocks">Max Stocks:</label>
      <input type="number" id="maxStocks" [(ngModel)]="maxStocks" min="10" max="100">
    </div>
    <div class="control-group">
      <label for="minPrice">Min Price ($):</label>
      <input type="number" id="minPrice" [(ngModel)]="minPrice" min="0" max="1000" step="0.01">
    </div>
    <div class="control-group">
      <label for="maxPrice">Max Price ($):</label>
      <input type="number" id="maxPrice" [(ngModel)]="maxPrice" min="10" max="1000" step="0.01">
    </div>
    <button class="refresh-btn" (click)="refreshData()" [disabled]="loading">
      ğŸ”„ {{ loading ? 'Loading...' : 'Refresh Data' }}
    </button>
  </div>

  <!-- Filter Summary -->
  <div *ngIf="!loading && !error" class="filter-summary">
    <p>ğŸ“Š Showing stocks between <strong>${{ minPrice.toFixed(2) }}</strong> and <strong>${{ maxPrice.toFixed(2) }}</strong> (max {{ maxStocks }} stocks)</p>
  </div>

  <!-- Preset Price Ranges -->
  <div class="preset-ranges">
    <button class="preset-btn" (click)="setPriceRange(0, 50)">ğŸ’° Penny Stocks ($0-$50)</button>
    <button class="preset-btn" (click)="setPriceRange(50, 100)">ğŸ“ˆ Mid-Cap ($50-$100)</button>
    <button class="preset-btn" (click)="setPriceRange(100, 200)">ğŸš€ Growth ($100-$200)</button>
    <button class="preset-btn" (click)="setPriceRange(0, 200)">ğŸ¯ All Under $200</button>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Analyzing market opportunities...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error">
    <p>âŒ {{ error }}</p>
    <button (click)="refreshData()">Try Again</button>
  </div>

  <!-- Summary Cards -->
  <div *ngIf="summary && !loading" class="summary-cards">
    <div class="summary-card total">
      <h3>ğŸ“Š Total Opportunities</h3>
      <div class="number">{{ summary.totalOpportunities }}</div>
    </div>
    <div class="summary-card strong-buy">
      <h3>ğŸŸ¢ Strong Buy</h3>
      <div class="number">{{ summary.strongBuy }}</div>
    </div>
    <div class="summary-card buy">
      <h3>ğŸ”µ Buy</h3>
      <div class="number">{{ summary.buy }}</div>
    </div>
    <div class="summary-card weak-buy">
      <h3>ğŸŸ¡ Weak Buy</h3>
      <div class="number">{{ summary.weakBuy }}</div>
    </div>
  </div>

  <!-- Opportunities Table -->
  <div *ngIf="opportunities.length > 0 && !loading" class="opportunities-section">
    <h2>ğŸ¯ Top Trading Opportunities</h2>
    <div class="table-container">
      <table class="opportunities-table">
        <thead>
          <tr>
            <th>Symbol</th>
            <th>Price</th>
            <th>Volume</th>
            <th>Volatility</th>
            <th>MA Trend</th>
            <th>Score</th>
            <th>Recommendation</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let opp of opportunities" class="opportunity-row">
            <td class="symbol">{{ opp.symbol }}</td>
            <td class="price">${{ opp.price.toFixed(2) }}</td>
            <td class="volume">{{ formatVolume(opp.volume) }}</td>
            <td class="volatility">{{ opp.volatility.toFixed(1) }}%</td>
            <td class="ma-trend">{{ opp.maTrend.toFixed(1) }}%</td>
            <td class="score">{{ opp.score }}/5</td>
            <td class="recommendation">
              <span [class]="getRecommendationClass(opp.recommendation)">
                {{ opp.recommendation }}
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- No Data State -->
  <div *ngIf="opportunities.length === 0 && !loading && !error" class="no-data">
    <p>No trading opportunities found. Try adjusting your filters.</p>
  </div>
</div>
